<!-- Sidebar do Management - Design independente e moderno -->
<aside id="sidebar" class="fixed z-40 inset-y-0 left-0 w-64 transform -translate-x-full lg:translate-x-0 lg:static lg:flex flex-col min-h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out shadow-xl lg:shadow-none">
  
  <!-- Header da sidebar -->
  <div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-gray-800 dark:to-gray-700">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-sm">
        <i data-lucide="truck" class="w-6 h-6 text-white"></i>
      </div>
      <div>
        <h2 class="text-lg font-bold text-gray-900 dark:text-white">
          {% block sidebar_title %}Management{% endblock %}
        </h2>
        <p class="text-xs text-gray-500 dark:text-gray-400">Sistema de Gestão</p>
      </div>
    </div>
    
    <!-- Botão fechar no mobile -->
    <button id="sidebar-close" class="lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
      <i data-lucide="x" class="w-5 h-5 text-gray-500 dark:text-gray-400"></i>
    </button>
  </div>
  
  <!-- Navegação principal -->
  <nav class="flex-1 p-4 space-y-2">
    <!-- Seção Dashboard -->
    <div class="mb-6">
      <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">
        Dashboard
      </div>
      
      <a href="{% url 'management:dashboard' %}"
        class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group {% if request.resolver_match.url_name == 'dashboard' %}bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 border-r-2 border-primary-500{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-primary-600 dark:hover:text-primary-400{% endif %}">
        <i data-lucide="layout-dashboard" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Dashboard Principal</span>
        {% if request.resolver_match.url_name == 'dashboard' %}
          <div class="ml-auto w-2 h-2 bg-primary-500 rounded-full"></div>
        {% endif %}
      </a>

      <a href="/management/debug-week-efficiency/"
        class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-primary-600 dark:hover:text-primary-400">
        <i data-lucide="bug" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Debug Eficiência</span>
      </a>
    </div>

    <!-- Seção Gestão -->
    <div class="mb-6">
      <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">
        Gestão
      </div>
      
      <a href="{% url 'management:drivers_management' %}"
        class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group {% if request.resolver_match.url_name == 'drivers_management' %}bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 border-r-2 border-primary-500{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-primary-600 dark:hover:text-primary-400{% endif %}">
        <i data-lucide="users" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Motoristas</span>
        {% if request.resolver_match.url_name == 'drivers_management' %}
          <div class="ml-auto w-2 h-2 bg-primary-500 rounded-full"></div>
        {% endif %}
      </a>

      <a href="#" class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-100">
        <i data-lucide="file-text" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Correção Manual</span>
      </a>

      <!-- Relatórios com submenu -->
      <div class="reports-menu">
        <button id="reportsToggle" class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group w-full text-left text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-primary-600 dark:hover:text-primary-400">
          <i data-lucide="bar-chart-3" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
          <span class="sidebar-text font-medium">Relatórios & Analytics</span>
          <i data-lucide="chevron-down" id="reportsChevron" class="w-4 h-4 ml-auto transition-transform"></i>
        </button>
        
        <!-- Submenu de Relatórios -->
        <div id="reportsSubmenu" class="ml-8 mt-1 space-y-1 hidden">
          <a href="{% url 'analytics:dashboard' %}" class="flex items-center gap-2 p-2 text-sm rounded-lg transition-colors text-gray-600 dark:text-gray-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:text-primary-600 dark:hover:text-primary-400">
            <i data-lucide="layout" class="w-4 h-4"></i>
            <span>Dashboard Geral</span>
          </a>
          
          <a href="{% url 'analytics:metrics' %}" class="flex items-center gap-2 p-2 text-sm rounded-lg transition-colors text-gray-600 dark:text-gray-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:text-primary-600 dark:hover:text-primary-400">
            <i data-lucide="trending-up" class="w-4 h-4"></i>
            <span>Métricas Detalhadas</span>
          </a>
          
          <a href="{% url 'analytics:drivers_performance' %}" class="flex items-center gap-2 p-2 text-sm rounded-lg transition-colors text-gray-600 dark:text-gray-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:text-primary-600 dark:hover:text-primary-400">
            <i data-lucide="user-check" class="w-4 h-4"></i>
            <span>Performance Motoristas</span>
          </a>
          
          <a href="{% url 'analytics:incidents' %}" class="flex items-center gap-2 p-2 text-sm rounded-lg transition-colors text-gray-600 dark:text-gray-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:text-primary-600 dark:hover:text-primary-400">
            <i data-lucide="alert-triangle" class="w-4 h-4"></i>
            <span>Incidências</span>
          </a>
          
          <a href="{% url 'analytics:vehicles_performance' %}" class="flex items-center gap-2 p-2 text-sm rounded-lg transition-colors text-gray-600 dark:text-gray-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:text-primary-600 dark:hover:text-primary-400">
            <i data-lucide="car" class="w-4 h-4"></i>
            <span>Performance Veículos</span>
          </a>

          <a href="{% url 'analytics:forecasts' %}" class="flex items-center gap-2 p-2 text-sm rounded-lg transition-colors text-gray-600 dark:text-gray-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:text-primary-600 dark:hover:text-primary-400">
            <i data-lucide="calendar-clock" class="w-4 h-4"></i>
            <span>Previsões de Volume</span>
          </a>

          <a href="{% url 'analytics:alerts' %}" class="flex items-center gap-2 p-2 text-sm rounded-lg transition-colors text-gray-600 dark:text-gray-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:text-primary-600 dark:hover:text-primary-400">
            <i data-lucide="bell" class="w-4 h-4"></i>
            <span>Alertas de Performance</span>
          </a>
        </div>
      </div>

      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const reportsToggle = document.getElementById('reportsToggle');
          const reportsSubmenu = document.getElementById('reportsSubmenu');
          const reportsChevron = document.getElementById('reportsChevron');
          
          if (reportsToggle) {
            reportsToggle.addEventListener('click', function(e) {
              e.preventDefault();
              reportsSubmenu.classList.toggle('hidden');
              reportsChevron.classList.toggle('rotate-180');
            });
          }
        });
      </script>

      <a href="{% url 'system_config:index' %}" class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-100">
        <i data-lucide="settings" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Configurações</span>
      </a>
    </div>

    <!-- Seção Ações -->
    <div class="mb-6">
      <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">
        Ações Rápidas
      </div>
      
      <button id="syncButton"
        class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group w-full text-left text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 hover:text-emerald-700 dark:hover:text-emerald-300 disabled:opacity-50 disabled:cursor-not-allowed">
        <i data-lucide="refresh-cw" class="w-5 h-5 text-current group-hover:rotate-180 transition-transform duration-500 flex-shrink-0"></i>
        <span class="sidebar-text font-medium sync-text">Sincronizar</span>
        <div class="ml-auto">
          <div class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
        </div>
      </button>

      <a href="#" class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-700 dark:hover:text-blue-300">
        <i data-lucide="download" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Exportar Dados</span>
      </a>

      <a href="#" class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:text-purple-700 dark:hover:text-purple-300">
        <i data-lucide="file-spreadsheet" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Planilhas</span>
      </a>
    </div>
  </nav>

  <!-- Footer da sidebar -->
  <div class="p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50">
    <div class="flex items-center gap-3 p-3 rounded-lg bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600">
      <div class="w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center">
        <i data-lucide="user" class="w-4 h-4 text-white"></i>
      </div>
      <div class="flex-1 min-w-0">
        <p class="text-sm font-medium text-gray-900 dark:text-white truncate">
          {{ user.username|default:"Admin" }}
        </p>
        <p class="text-xs text-gray-500 dark:text-gray-400">
          Management
        </p>
      </div>
      <a href="{% url 'customauth:logout' %}" class="p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors" title="Logout">
        <i data-lucide="log-out" class="w-4 h-4 text-gray-500 dark:text-gray-400"></i>
      </a>
    </div>
  </div>
</aside>
