<!-- Sidebar do Management - Design independente e moderno -->
<aside id="sidebar" class="fixed z-40 inset-y-0 left-0 w-65 transform -translate-x-full lg:translate-x-0 lg:static lg:flex flex-col min-h-screen bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out shadow-xl lg:shadow-none">
  
  <!-- Header da sidebar -->
  <div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-gray-800 dark:to-gray-700">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center shadow-sm">
        <i data-lucide="truck" class="w-6 h-6 text-white"></i>
      </div>
      <div>
        <h2 class="text-lg font-bold text-gray-900 dark:text-white">
          {% block sidebar_title %}Management{% endblock %}
        </h2>
        <p class="text-xs text-gray-500 dark:text-gray-400">Sistema de Gestão</p>
      </div>
    </div>
    
    <!-- Botão fechar no mobile -->
    <button id="sidebar-close" class="lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
      <i data-lucide="x" class="w-5 h-5 text-gray-500 dark:text-gray-400"></i>
    </button>
  </div>
  
  <!-- Navegação principal -->
  <nav class="flex-1 p-4 space-y-2">
    <!-- Seção Dashboard -->
    <div class="mb-6">
      <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">
        Dashboard Paack
      </div>
      
      <a href="{% url 'paack_dashboard:dashboard_paack' %}"
        class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group {% if request.resolver_match.url_name == 'dashboard_paack' %}bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 border-r-2 border-primary-500{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-primary-600 dark:hover:text-primary-400{% endif %}">
        <i data-lucide="layout-dashboard" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Dashboard Paack</span>
        {% if request.resolver_match.url_name == 'dashboard_paack' %}
          <div class="ml-auto w-2 h-2 bg-primary-500 rounded-full"></div>
        {% endif %}
      </a>

      <a href="{% url 'paack_dashboard:debug_week_efficiency' %}"
        class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-primary-600 dark:hover:text-primary-400">
        <i data-lucide="bug" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Debug Eficiência</span>
      </a>
    </div>

    <!-- Seção Gestão -->
    <div class="mb-6">
      <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">
        Gestão
      </div>
      
      <!-- Motoristas - Submenu Expansivel -->
      <div x-data="{ open: {% if 'admin_' in request.resolver_match.url_name %}true{% else %}false{% endif %} }" class="mb-1">
        <button @click="open = !open" type="button"
          class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group w-full text-left {% if 'admin_create_driver' in request.resolver_match.url_name or 'admin_approve_driver' in request.resolver_match.url_name or 'admin_active_drivers' in request.resolver_match.url_name %}bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-primary-600 dark:hover:text-primary-400{% endif %}">
          <i data-lucide="users" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
          <span class="sidebar-text font-medium flex-1">Motoristas</span>
          <i data-lucide="chevron-down" :class="open ? 'rotate-180' : ''" class="w-4 h-4 transition-transform"></i>
        </button>
        
        <!-- Submenu -->
        <div x-show="open" 
             x-transition:enter="transition ease-out duration-200"
             x-transition:enter-start="opacity-0 -translate-y-1"
             x-transition:enter-end="opacity-100 translate-y-0"
             x-transition:leave="transition ease-in duration-150"
             x-transition:leave-start="opacity-100 translate-y-0"
             x-transition:leave-end="opacity-0 -translate-y-1"
             class="ml-8 mt-1 space-y-1 border-l-2 border-gray-200 dark:border-gray-700 pl-3">
          <a href="{% url 'drivers_app:admin_create_driver' %}" 
            class="flex items-center gap-2 p-2 rounded-lg text-sm transition-all {% if request.resolver_match.url_name == 'admin_create_driver' %}bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 font-medium{% else %}text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-100{% endif %}">
            <i data-lucide="user-plus" class="w-4 h-4"></i>
            <span>Cadastrar Motorista</span>
          </a>
          
          <a href="{% url 'drivers_app:admin_approve_drivers' %}" 
            class="flex items-center gap-2 p-2 rounded-lg text-sm transition-all {% if request.resolver_match.url_name == 'admin_approve_drivers' %}bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 font-medium{% else %}text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-100{% endif %}">
            <i data-lucide="user-check" class="w-4 h-4"></i>
            <span>Aprovar Cadastros</span>
            {% if pending_drivers_count > 0 %}
            <span class="ml-auto text-xs bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 px-2 py-0.5 rounded-full">
              {{ pending_drivers_count }}
            </span>
            {% endif %}
          </a>
          
          <a href="{% url 'drivers_app:admin_active_drivers' %}" 
            class="flex items-center gap-2 p-2 rounded-lg text-sm transition-all {% if request.resolver_match.url_name == 'admin_active_drivers' %}bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 font-medium{% else %}text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-100{% endif %}">
            <i data-lucide="users-round" class="w-4 h-4"></i>
            <span>Motoristas Ativos</span>
            <span class="ml-auto text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-2 py-0.5 rounded-full">
              {{ active_drivers_count|default:0 }}
            </span>
          </a>
        </div>
      </div>

      <a href="{% url 'manualorders_paack:manual_management' %}" class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-100">
        <i data-lucide="file-text" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Correção Manual</span>
      </a>

      <a href="{% url 'paack_dashboard:dashboard_paack' %}" class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-100">
        <i data-lucide="file-text" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Relatórios</span>
        <span class="ml-auto text-xs bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-2 py-1 rounded-full">Em breve</span>
      </a>

      <a href="{% url 'system_config:index' %}" class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-100">
        <i data-lucide="settings" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Configurações</span>
      </a>
    </div>

    <!-- Seção Ações -->
    <div class="mb-6">
      <div class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">
        Ações Rápidas
      </div>

      <form id="formSyncApiPaack" method="POST" action="{% url 'ordersmanager_paack:sync_data_paack' %}">
        {% csrf_token %}
        <button id="syncButtonaApiPaack"
          class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group w-full text-left text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 hover:text-emerald-700 dark:hover:text-emerald-300 disabled:opacity-50 disabled:cursor-not-allowed">
          <i data-lucide="refresh-cw" class="w-5 h-5 text-current group-hover:rotate-180 transition-transform duration-500 flex-shrink-0"></i>
          <span class="sidebar-text font-medium sync-text">Sincronizar</span>
          <div class="ml-auto">
            <div class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
          </div>
        </button>
      </form>

      <a href="{% url 'paack_dashboard:dashboard_paack' %}" class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-700 dark:hover:text-blue-300">
        <i data-lucide="download" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Exportar Dados</span>
        <span class="ml-auto text-xs bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-2 py-1 rounded-full">Em breve</span>
      </a>

      <a href="{% url 'paack_dashboard:dashboard_paack' %}" class="nav-link flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:text-purple-700 dark:hover:text-purple-300">
        <i data-lucide="file-spreadsheet" class="w-5 h-5 text-current group-hover:scale-110 transition-transform flex-shrink-0"></i>
        <span class="sidebar-text font-medium">Planilhas</span>
        <span class="ml-auto text-xs bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-2 py-1 rounded-full">Em breve</span>
      </a>
    </div>
  </nav>

  <!-- Footer da sidebar -->
  <div class="p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50">
    <div class="flex items-center gap-3 p-3 rounded-lg bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600">
      <div class="w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center">
        <i data-lucide="user" class="w-4 h-4 text-white"></i>
      </div>
      <div class="flex-1 min-w-0">
        <p class="text-sm font-medium text-gray-900 dark:text-white truncate">
          {{ user.username|default:"Admin" }}
        </p>
        <p class="text-xs text-gray-500 dark:text-gray-400">
          Management
        </p>
      </div>
      <a href="{% url 'customauth:logout' %}" class="p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors" title="Logout">
        <i data-lucide="log-out" class="w-4 h-4 text-gray-500 dark:text-gray-400"></i>
      </a>
    </div>
  </div>
</aside>
