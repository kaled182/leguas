# Generated by Django 4.2.22 on 2026-02-07 22:18

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import system_config.fields


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='CompanyProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('company_name', models.CharField(max_length=255, verbose_name='Nome da Empresa')),
                ('assets_logo', models.ImageField(blank=True, null=True, upload_to='company/logos/', verbose_name='Logotipo (Assets)')),
                ('assets_favicon', models.ImageField(blank=True, null=True, upload_to='company/favicon/', verbose_name='Favicon')),
                ('primary_color', models.CharField(default='#0ea5e9', help_text='Código hexadecimal (ex: #0ea5e9)', max_length=7, verbose_name='Cor Primária')),
                ('secondary_color', models.CharField(default='#0369a1', help_text='Código hexadecimal (ex: #0369a1)', max_length=7, verbose_name='Cor Secundária')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Criado em')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Atualizado em')),
            ],
            options={
                'verbose_name': 'Perfil da Empresa',
                'verbose_name_plural': 'Perfis da Empresa',
            },
        ),
        migrations.CreateModel(
            name='MessagingGateway',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=120, verbose_name='Nome')),
                ('gateway_type', models.CharField(choices=[('sms', 'SMS'), ('whatsapp', 'WhatsApp'), ('telegram', 'Telegram'), ('smtp', 'SMTP')], max_length=16, verbose_name='Tipo de Gateway')),
                ('provider', models.CharField(blank=True, max_length=64, null=True, verbose_name='Provedor')),
                ('priority', models.IntegerField(default=1, verbose_name='Prioridade')),
                ('enabled', models.BooleanField(default=True, verbose_name='Ativado')),
                ('config', models.JSONField(blank=True, default=dict, verbose_name='Configuração')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Criado em')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Atualizado em')),
            ],
            options={
                'verbose_name': 'Gateway de Mensagens',
                'verbose_name_plural': 'Gateways de Mensagens',
                'ordering': ['priority', 'name'],
            },
        ),
        migrations.CreateModel(
            name='SystemConfiguration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('company_name', models.CharField(blank=True, max_length=255, null=True, verbose_name='Nome da Empresa')),
                ('logo', models.ImageField(blank=True, null=True, upload_to='system_config/logos/', verbose_name='Logotipo')),
                ('map_provider', models.CharField(choices=[('google', 'Google Maps'), ('mapbox', 'Mapbox'), ('osm', 'OpenStreetMap')], default='google', max_length=20, verbose_name='Provedor de Mapas')),
                ('google_maps_api_key', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='Google Maps API Key')),
                ('map_default_zoom', models.IntegerField(default=12, verbose_name='Zoom Padrão')),
                ('map_default_lat', models.DecimalField(decimal_places=7, default=41.69314, max_digits=10, verbose_name='Latitude Padrão')),
                ('map_default_lng', models.DecimalField(decimal_places=7, default=-8.83565, max_digits=10, verbose_name='Longitude Padrão')),
                ('map_type', models.CharField(default='terrain', max_length=20, verbose_name='Tipo de Mapa')),
                ('map_styles', models.TextField(blank=True, null=True, verbose_name='Estilos Customizados (JSON)')),
                ('enable_street_view', models.BooleanField(default=True, verbose_name='Ativar Street View')),
                ('enable_traffic', models.BooleanField(default=False, verbose_name='Ativar Trânsito')),
                ('mapbox_access_token', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='Mapbox Access Token')),
                ('mapbox_style', models.CharField(default='mapbox://styles/mapbox/streets-v12', max_length=255, verbose_name='Estilo Mapbox')),
                ('mapbox_custom_style', models.CharField(blank=True, max_length=255, null=True, verbose_name='Estilo Customizado Mapbox')),
                ('mapbox_enable_3d', models.BooleanField(default=False, verbose_name='Ativar 3D Mapbox')),
                ('esri_api_key', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='Esri API Key')),
                ('esri_basemap', models.CharField(default='streets', max_length=50, verbose_name='Basemap Esri')),
                ('map_language', models.CharField(default='pt-PT', max_length=10, verbose_name='Idioma do Mapa')),
                ('map_theme', models.CharField(choices=[('light', 'Claro'), ('dark', 'Escuro'), ('auto', 'Automático')], default='light', max_length=10, verbose_name='Tema do Mapa')),
                ('enable_map_clustering', models.BooleanField(default=True, verbose_name='Ativar Clustering')),
                ('enable_drawing_tools', models.BooleanField(default=True, verbose_name='Ativar Ferramentas de Desenho')),
                ('enable_fullscreen', models.BooleanField(default=True, verbose_name='Ativar Fullscreen')),
                ('osm_tile_server', models.CharField(blank=True, max_length=255, null=True, verbose_name='Servidor de Tiles OSM')),
                ('gdrive_enabled', models.BooleanField(default=False, verbose_name='Google Drive Ativado')),
                ('gdrive_auth_mode', models.CharField(choices=[('service_account', 'Service Account'), ('oauth', 'OAuth (Conta pessoal)')], default='service_account', max_length=32, verbose_name='Modo de Autenticação Google Drive')),
                ('gdrive_credentials_json', system_config.fields.EncryptedCharField(blank=True, max_length=4096, max_plain_length=4096, null=True, verbose_name='Google Drive Credentials JSON')),
                ('gdrive_folder_id', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Google Drive Folder ID')),
                ('gdrive_shared_drive_id', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Google Drive Shared Drive ID')),
                ('gdrive_oauth_client_id', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='OAuth Client ID')),
                ('gdrive_oauth_client_secret', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='OAuth Client Secret')),
                ('gdrive_oauth_refresh_token', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='OAuth Refresh Token')),
                ('gdrive_oauth_user_email', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='OAuth User Email')),
                ('ftp_enabled', models.BooleanField(default=False, verbose_name='FTP Ativado')),
                ('ftp_host', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Host FTP')),
                ('ftp_port', models.IntegerField(default=21, verbose_name='Porta FTP')),
                ('ftp_user', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Utilizador FTP')),
                ('ftp_password', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Senha FTP')),
                ('ftp_directory', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Diretório FTP')),
                ('smtp_enabled', models.BooleanField(default=False, verbose_name='SMTP Ativado')),
                ('smtp_host', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Host SMTP')),
                ('smtp_port', system_config.fields.EncryptedCharField(blank=True, default='587', max_length=32, max_plain_length=255, null=True, verbose_name='Porta SMTP')),
                ('smtp_security', system_config.fields.EncryptedCharField(blank=True, default='TLS', max_length=16, max_plain_length=255, null=True, verbose_name='Segurança SMTP')),
                ('smtp_user', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Utilizador SMTP')),
                ('smtp_password', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Senha SMTP')),
                ('smtp_auth_mode', system_config.fields.EncryptedCharField(blank=True, default='password', max_length=32, max_plain_length=255, null=True, verbose_name='Modo de Autenticação SMTP')),
                ('smtp_oauth_client_id', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='OAuth Client ID SMTP')),
                ('smtp_oauth_client_secret', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='OAuth Client Secret SMTP')),
                ('smtp_oauth_refresh_token', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='OAuth Refresh Token SMTP')),
                ('smtp_from_name', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Nome do Remetente')),
                ('smtp_from_email', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='E-mail do Remetente')),
                ('smtp_test_recipient', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Destinatário de Teste')),
                ('smtp_use_tls', models.BooleanField(default=True, verbose_name='Usar TLS')),
                ('sms_enabled', models.BooleanField(default=False, verbose_name='SMS Ativado')),
                ('sms_provider', models.CharField(choices=[('twilio', 'Twilio'), ('nexmo', 'Nexmo'), ('aws_sns', 'AWS SNS'), ('infobip', 'Infobip'), ('zenvia', 'Zenvia'), ('totalvoice', 'TotalVoice')], default='twilio', max_length=32, verbose_name='Provedor SMS')),
                ('sms_provider_rank', models.IntegerField(default=1, verbose_name='Rank do Provedor SMS')),
                ('sms_account_sid', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Account SID/Username SMS')),
                ('sms_auth_token', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='Auth Token/Password SMS')),
                ('sms_api_key', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='API Key SMS')),
                ('sms_api_url', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='API URL SMS')),
                ('sms_from_number', system_config.fields.EncryptedCharField(blank=True, max_length=64, max_plain_length=255, null=True, verbose_name='Número de Envio SMS')),
                ('sms_test_recipient', system_config.fields.EncryptedCharField(blank=True, max_length=64, max_plain_length=255, null=True, verbose_name='Destinatário de Teste SMS')),
                ('sms_test_message', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Mensagem de Teste SMS')),
                ('sms_priority', system_config.fields.EncryptedCharField(blank=True, max_length=16, max_plain_length=255, null=True, verbose_name='Prioridade SMS')),
                ('sms_aws_region', system_config.fields.EncryptedCharField(blank=True, max_length=64, max_plain_length=255, null=True, verbose_name='AWS Region')),
                ('sms_aws_access_key_id', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='AWS Access Key ID')),
                ('sms_aws_secret_access_key', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='AWS Secret Access Key')),
                ('sms_infobip_base_url', system_config.fields.EncryptedCharField(blank=True, max_length=255, max_plain_length=255, null=True, verbose_name='Infobip Base URL')),
                ('whatsapp_enabled', models.BooleanField(default=False, verbose_name='WhatsApp Ativado')),
                ('whatsapp_evolution_api_url', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='Evolution API URL')),
                ('whatsapp_evolution_api_key', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='Evolution API Key')),
                ('whatsapp_instance_name', models.CharField(blank=True, max_length=255, null=True, verbose_name='Nome da Instância WhatsApp')),
                ('db_host', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='Host da Base de Dados')),
                ('db_port', system_config.fields.EncryptedCharField(blank=True, max_length=64, max_plain_length=255, null=True, verbose_name='Porta da Base de Dados')),
                ('db_name', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='Nome da Base de Dados')),
                ('db_user', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='Utilizador da Base de Dados')),
                ('db_password', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='Senha da Base de Dados')),
                ('redis_url', system_config.fields.EncryptedCharField(blank=True, max_length=512, max_plain_length=255, null=True, verbose_name='URL do Redis')),
                ('configured', models.BooleanField(default=False, verbose_name='Sistema Configurado')),
                ('configured_at', models.DateTimeField(auto_now_add=True, verbose_name='Configurado em')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Atualizado em')),
            ],
            options={
                'verbose_name': 'Configuração do Sistema',
                'verbose_name_plural': 'Configurações do Sistema',
            },
        ),
        migrations.CreateModel(
            name='ConfigurationAudit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('timestamp', models.DateTimeField(auto_now_add=True, verbose_name='Data/Hora')),
                ('action', models.CharField(max_length=50, verbose_name='Ação')),
                ('field_name', models.CharField(blank=True, max_length=100, null=True, verbose_name='Campo')),
                ('old_value', models.TextField(blank=True, null=True, verbose_name='Valor Anterior')),
                ('new_value', models.TextField(blank=True, null=True, verbose_name='Novo Valor')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='Endereço IP')),
                ('user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='Utilizador')),
            ],
            options={
                'verbose_name': 'Auditoria de Configuração',
                'verbose_name_plural': 'Auditorias de Configuração',
                'ordering': ['-timestamp'],
            },
        ),
    ]
