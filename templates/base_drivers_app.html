<!DOCTYPE html>
<html lang="pt-br" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}
        Dashboard
      {% endblock %}
    </title>
    {% load static %}

    <!-- Tailwind CSS -->

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/base.css' %}" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ“Š</text></svg>">

    {% block extra_head %}
    {% endblock %}
  </head>
  <body class="h-full bg-gray-50 text-gray-900 transition-colors duration-300">
    <!-- Ãrea de NotificaÃ§Ãµes -->
    <div id="notification-area" class="fixed top-4 right-4 z-50 space-y-3 max-w-sm"></div>

    <!-- BotÃ£o Dark Mode Flutuante Elegante -->
    <div class="fixed bottom-6 right-6 z-40">
        <button 
            onclick="myFunction()" 
            id="darkModeToggle"
            class="group relative w-14 h-14 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center overflow-hidden"
            title="Alternar tema"
        >
            <!-- Ãcone Sol (modo claro) -->
            <i data-lucide="sun" class="sun-icon w-6 h-6 text-white transition-all duration-300 absolute"></i>
            <!-- Ãcone Lua (modo escuro) -->
            <i data-lucide="moon" class="moon-icon w-6 h-6 text-white transition-all duration-300 absolute opacity-0"></i>
            
            <!-- Efeito de ripple ao clicar -->
            <div class="absolute inset-0 rounded-full bg-white opacity-0 group-active:opacity-20 transition-opacity duration-150"></div>
        </button>
    </div>

    <div class="flex h-screen">
      <!-- Sidebar -->
      <aside id="sidebar" class="fixed inset-y-0 left-0 z-30 w-64 bg-white border-r border-gray-200 flex flex-col transition-all duration-300 transform -translate-x-full lg:translate-x-0">
        <!-- Header da Sidebar -->
        <div class="flex items-center justify-between px-6 py-5 border-b border-gray-200">
          <span class="sidebar-title text-xl font-bold text-indigo-600">
            {% block sidebar_title %}
              Dashboard
            {% endblock %}
          </span>
          <div class="flex gap-2">
            <!-- BotÃ£o de colapsar (desktop) -->
            <button id="sidebarCollapse" class="hidden lg:flex p-2 rounded-lg hover:bg-gray-100 transition-colors"><i data-lucide="chevron-left" class="w-5 h-5"></i></button>
            <!-- BotÃ£o de fechar (mobile) -->
            <button id="sidebarClose" class="lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors"><i data-lucide="x" class="w-5 h-5"></i></button>
          </div>
        </div>

        <!-- InformaÃ§Ãµes do UsuÃ¡rio -->
        {% if request.user.is_authenticated %}
          <div class="user-info flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg m-4 transition-all">
            <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0">
              <i data-lucide="user" class="w-5 h-5 text-white"></i>
            </div>
            <div class="min-w-0">
              <p class="sidebar-text font-semibold text-gray-800 truncate">{{ request.user.first_name }} {{ request.user.last_name }}</p>
              <p class="sidebar-text text-xs text-gray-500 truncate">{{ request.user.email }}</p>
            </div>
          </div>
        {% endif %}

        <!-- NavegaÃ§Ã£o -->
        <nav class="flex-1 px-4 py-2 space-y-1 overflow-y-auto">
          {% include 'partials/sidebar_links.html' %}
        </nav>
      </aside>

      <!-- Overlay para Mobile -->
      <div id="mobileBackdrop" class="fixed inset-0 bg-black/50 z-20 hidden lg:hidden"></div>

      <!-- ConteÃºdo Principal -->
      <div id="mainContent" class="flex-1 flex flex-col min-h-0 lg:ml-64 transition-all duration-300">
        <!-- Topbar Mobile -->
        <header class="lg:hidden flex items-center justify-between px-6 py-4 bg-white border-b border-gray-200 shadow-sm">
            <button id="mobileMenuBtn" class="p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors">
                <i data-lucide="menu" class="w-6 h-6 text-gray-700"></i>
            </button>

            <span class="text-lg font-bold text-indigo-600">
                {% block mobile_title %}Dashboard{% endblock %}
            </span>

            <!-- BotÃ£o Dark Mode no Mobile -->
            <button onclick="myFunction()" class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
                <i data-lucide="moon" class="w-5 h-5 text-gray-600"></i>
            </button>
        </header>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto p-6">
          {% block content %}
            <!-- ConteÃºdo da pÃ¡gina aqui -->
          {% endblock %}
        </main>
      </div>
    </div>

    <!-- Scripts -->
    <script src="{% static 'js/base.js' %}"></script>
    {% block scripts %}{% endblock %}
    {% block extra_js %}{% endblock %}
  </body>
</html>
